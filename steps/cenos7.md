# CentOS7を仮想環境に構築する


## ①CentOS7のダウンロード
 1. 下記URLにアクセスして「DVD　ISO」をクリック。 https://www.centos.org/download/
 2. ミラーサイト一覧が表示されるので、適当なURLを選んでCentOS7のISOイメージをダウンロードする。
 3. 下記URLにアクセスしてダウンロードしたCentOS7系のリンクをクリック。 https://wiki.centos.org/Manuals/ReleaseNotes
 4. 下にスクロールしていくとダウンロードしたISOイメージに対応したハッシュ値が表示されているので、<br>
    ダウンロードしたISOイメージのハッシュ値と一致しているか確認を行う。<br>
   （一致してない場合ダウンロードの失敗、改ざんなどの可能性があるので注意！）<br>

  * **ローカルファイルのハッシュ値確認方法**<br>
    確認したいファイルのあるディレクトリに移動して下記コマンドを実行<br>
    `$certutil -hashfile [確認したいファイル名]　SHA256`<br>
    ※デフォルトだとハッシュ関数がSHA1になっている。末尾にハッシュ関数を付けることで変更可能。

## ②仮想マシンの作成
1. VirtualBoxを起動し、左上の新規ボタンをクリック。仮想マシンの作成ダイアログが開く。
2. **名前とオペレーティングシステム**<br>
   任意の名前を入力し、タイプはLinux、バージョンはRed　Hat（64bit）を選択して「次へ」をクリック
3. **メモリーサイズ**<br>
   メモリ（RAM）は　最低でも512MiBは必要らしい。初期値は1024MB
4. **ハードディスク**<br>
   `仮想ハードディスクを作成する`を選択して「作成」をクリック
   1. **ハードディスクのファイルタイプ**<br>
      `VDI(VirtualBox Disk Image)`を選択して「次へ」をクリック
   2. **物理ハードディスクにあるストレージ**<br>
      `可変サイズ`を選択して「次へ」をクリック
   3. **ファイルの場所とサイズ**<br>
      インストールするアプリケーションなどによりサイズを選択して「作成」をクリック

## ③CentOS7のインストール
1. VirtualBoxのUI上で、作成した仮想マシンが選択された状態で、上部バーの起動をクリック<br>
   ※ゲストOSウィンドウの画面内をクリックすると、マウスの制御がゲストOSに移る。<br>
   ※ホストOSに戻したい場合はキーボードの右側にある[ctrl]キーを押す。
2. **起動ハードディスクを選択**<br>
   プルダウンメニュー右のフォルダの形をしたボタンからダウンロードしておいたISOイメージを選択して起動する。
3. CentOSのインストーラーが起動するので、そのままEnterキーを押す。
4. **インストール時に使用する言語**<br>
   日本語を選択する。（下の検索欄にjと入力すると、日本語が検索される）
5. インストールの概要
   1. `ソフトウェアの選択`を選択して**ベース環境**から**GNOME Desktop**を選択、**選択した環境のアドオン**から**GNOMEアプリケーション**を選択して「完了」をクリック
   2. `インストール先`を選択し、何もせずに「完了」をクリック
   3. `ネットワークとホスト名`を選択し、**ネットワークとホスト名**設定画面の右上にあるスイッチをオンにして「完了」をクリック
   4. 「インストールの開始」をクリック
6. **ユーザーの設定**
   1. `rootパスワード`を選択し、任意の`rootパスワード`を入力して「完了」をクリック
   2. `ユーザーの作成`を選択し、任意の`フルネーム･ユーザー`と`パスワード`を入力、`このユーザーを管理者にする`にチェックを入れて「完了」をクリック
   3. しばらくすると、CentOS7のインストールが完了するので、「再起動」をクリック
   4. 再起動後、初期セットアップ画面が表示されます。`LICENSING　INFORMATION`を選択し、`ライセンス契約に同意します。`にチェックを入れて「完了」をクリック
   5. 「設定の完了(F)」をクリックする。ログイン画面に切り替わる。
   6. 作成したユーザーを選択、パスワード入力してログイン
   7. 「ようこそ」ダイアログが表示される。
7. **入力**<br>
   `日本語`が選択されているのでそのまま「次へ」をクリック
8. **オンラインアカウントに接続**<br>
   「スキップ」をクリック
9. **準備完了**<br>
   「CentOS Linux を使い始める」をクリック
## ④SSHクライアント(Tera Term)インストール
1. 画像の赤枠で囲まれた部分を、下記URLにアクセスしてクリック https://ja.osdn.net/projects/ttssh2/releases/ <br>
   <img src=image/SSH.JPG><br>
   ダウンロードできたexeファイルを起動する。
2. **インストール中に利用する言語**<br>
   日本語　のままで「OK」をクリック
3. **使用許諾契約書の同意**<br>
   同意するを選択して、「次へ」をクリック
4. **コンポーネントの選択**<br>
   変更点はないのでそのまま「次へ」をクリック
5. **言語の選択**<br>
   日本語で良いのでそのまま「次へ」をクリック
6. **追加タスクの選択**<br>
   ショートカットアイコンの表示場所なので、表示させたい場所にチェックをいれる。
7. **インストール準備完了**
   インストール情報が表示されるので確認して問題なければ「インストール」をクリック
8. セットアップが完了するので「完了」をクリック
## ⑤SSHクライアント(Tera Term)の設定
1. デスクトップ上にショートカットアイコンが作成されているので起動させる。
2. 以下のような画面が起動する。<br>
   <img src=image/SSH3.JPG><br>
3. **TCPポート#(P): 22**<br>
   <img src=image/SSH4.JPG><br>
 * 上記のポート番号で仮想環境に接続するために、VirtualBoxのUI上で設定をする。<br>
   1. VirtualBoxを起動して、使用する仮想マシンを選択して[設定]をクリック<br>
      <img src=image/VirtualBox_IF.JPG>
   2. ネットワークを選択して「高度」をクリック<br>
      <img src=image/VirtualBox_IF1.JPG>
   3. ポートフォワーディングをクリック<br>
      <img src=image/VirtualBox_IF2.JPG>
   4. <img src=image/VirtualBox_IF4.JPG>をクリックした後、ホストポート、ゲストポートに22を入力して「OK」をクリック<br>
      <img src=image/VirtualBox_IF3.JPG><br>
      以上でVirtualBoxの設定は完了。
4. **ホスト**<br>
   TeraTermの画面に戻って、ローカルマシンのIPアドレスを入力する。<br>
   <img src=image/SSH5.JPG><br>
   下記コマンドでIPアドレスを確認できる。<br>
   ```
   $ipconfig

    Windows IP 構成


    イーサネット アダプター イーサネット:

    接続固有の DNS サフィックス . . . . .:
    リンクローカル IPv6 アドレス. . . . .: fe80::f8a6:6a36:1d2e:6ae7%7
    IPv4 アドレス . . . . . . . . . . . .: 192.168.111.154
    サブネット マスク . . . . . . . . . .: 255.255.255.0
    デフォルト ゲートウェイ . . . . . . .: 192.168.111.254
   ```
   このような表示があるので、IPv4 アドレスの値を入力して「OK」をクリック<br>
   ※一番最初の接続時には、ホスト認証の確認がされるので、そのまま「続行」をクリック
5. 接続先のLinuxのユーザー名とパスワードを入力して「OK」をクリック。接続できれば完了。